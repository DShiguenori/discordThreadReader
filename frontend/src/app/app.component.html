<nz-layout class="layout">
  <nz-header class="header">
    <div class="logo">Discord Topic Reader</div>
    <div class="menu">
      <button
        nz-button
        nzType="text"
        [class.active]="currentView === 'main'"
        (click)="switchView('main')"
        class="menu-button"
      >
        <span nz-icon nzType="home"></span>
        <span>Home</span>
      </button>
      <button
        nz-button
        nzType="text"
        [class.active]="currentView === 'summaries'"
        (click)="switchView('summaries')"
        class="menu-button"
      >
        <span nz-icon nzType="file-text"></span>
        <span>Saved Summaries</span>
      </button>
      <button
        nz-button
        nzType="text"
        [class.active]="currentView === 'config'"
        (click)="switchView('config')"
        class="menu-button"
      >
        <span nz-icon nzType="setting"></span>
        <span>Config</span>
      </button>
    </div>
  </nz-header>
  <nz-content class="content">
    <div class="container" *ngIf="currentView === 'main'">
      <div class="header-row">
        <h1>Select a Channel and Thread</h1>
        <button
          nz-button
          nzType="primary"
          nz-icon
          (click)="openUrlModal()"
        >
          <span nz-icon nzType="link"></span>
          <span>Paste Thread URL</span>
        </button>
      </div>

      <app-channel-selector
        [selectedChannelId]="selectedChannel?.id || null"
        (channelSelected)="onChannelSelected($event)"
      >
      </app-channel-selector>

      <app-thread-selector
        *ngIf="selectedChannel"
        [channelId]="selectedChannel.id"
        (threadSelected)="onThreadSelected($event)"
      >
      </app-thread-selector>
    </div>

    <div class="container" *ngIf="currentView === 'summaries'">
      <h1>Saved Summaries</h1>
      <app-summary-list></app-summary-list>
    </div>

    <div class="container" *ngIf="currentView === 'config'">
      <app-config></app-config>
    </div>
  </nz-content>
  
  <!-- Global loading overlay for summary generation -->
  <div class="loading-overlay" *ngIf="generatingSummary">
    <nz-spin [nzSize]="'large'" nzTip="Generating summary with AI...">
    </nz-spin>
  </div>
</nz-layout>
